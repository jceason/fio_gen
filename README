Build using make

make -f Makefile
g++ -DLINUX  -lpthread src/fio_gen.cpp -o bin/fio_gen  

Binary is now under bin/fio_gen

Usage
fio_gen -h 

VERSION:1.03
fio_gen -s <size> -p <path> [options]
	 Required 
	 -s <size in MB> 	Total size to write
	 -p <path> 		Path to filesystem for test 

	 Optional 
	 -b <block size>	Size of writes and reads. Must be multiples of 32 Default 4096
	 -f <max files> 	Overides total size
	 -i <iterations>	Number of test iterations
	 -t <num>  		Number of threads. Default 1 
	 -w 		Write only
	 -k 		Keep directories and files
	 -h 		Help 
EXAMPLE fio_gen -s 500 -p /tmp -f 1000 -i 1 


Sample running single thread

./fio_gen -s 10000 -p /mnt/nfs0 
THREAD 139645349725952  ITERATION 0 
Thread 139645349725952 Current Write 2050 MB 698.800109 MB/s 
Thread 139645349725952 Current Write 8196 MB 963.797163 MB/s 
Thread 139645349725952 Total Write 10006 MB 1010.660723 MB/s 
Thread 139645349725952 Current Read 2050 MB 1919.903499 MB/s 
Thread 139645349725952 Current Read 8196 MB 2147.067299 MB/s 
Thread 139645349725952 Total Read 10006 MB 2169.451837 MB/s 
TESTCOMPLETE:
Thread 139645349725952 :NUM FILES:2263 
Thread 139645349725952 :NUM DIRECTORYS:3 
Thread 139645349725952 :WRITE SIZE:10006 MB
Thread 139645349725952 :READ SIZE:10006 MB
Thread 139645349725952 :WRITE AVG:1010.660723 MB/s
Thread 139645349725952 :READ AVG:2169.451837 MB/s
Thread 139645349725952 :PASS
TESTSTAT:NUM FILES:2263 
TESTSTAT:NUM DIRECTORYS:3 
TESTSTAT:WRITE SIZE:10006 MB
TESTSTAT:WRITE SIZE:10006 MB
TESTSTAT:READ SIZE:10006 MB
TESTSTAT:WRITE AVG:1010.660723 MB/s
TESTSTAT:READ AVG:2169.451837 MB/s
TESTTIME:28.06 s
TESTRESULT:PASS 
[root@wings]# 


Sample running with two threads

./fio_gen -t 2 -s 10000 -p /mnt/nfs0
BLOCK_SIZE 4096
/VERSION:1.03
TESTCOMMAND: ./fio_gen -t 2 -s 10000 -p /mnt/nfs0 
THREAD 140235282351872  ITERATION 0 
THREAD 140235271862016  ITERATION 0 
Thread 140235271862016 Current Write 2050 MB 956.618517 MB/s 
Thread 140235282351872 Current Write 2050 MB 940.541706 MB/s 
Thread 140235271862016 Total Write 5003 MB 633.808054 MB/s 
Thread 140235282351872 Total Write 5003 MB 597.869705 MB/s 
Thread 140235271862016 Current Read 2050 MB 2032.792412 MB/s 
Thread 140235282351872 Current Read 2050 MB 2035.547612 MB/s 
Thread 140235271862016 Total Read 5003 MB 2077.526668 MB/s 
Thread 140235282351872 Total Read 5003 MB 2103.615797 MB/s 
TESTCOMPLETE:
Thread 140235282351872 :NUM FILES:1600 
Thread 140235282351872 :NUM DIRECTORYS:2 
Thread 140235282351872 :WRITE SIZE:5003 MB
Thread 140235282351872 :READ SIZE:5003 MB
Thread 140235282351872 :WRITE AVG:597.869705 MB/s
Thread 140235282351872 :READ AVG:2103.615797 MB/s
Thread 140235282351872 :PASS
Thread 140235271862016 :NUM FILES:1600 
Thread 140235271862016 :NUM DIRECTORYS:2 
Thread 140235271862016 :WRITE SIZE:5003 MB
Thread 140235271862016 :READ SIZE:5003 MB
Thread 140235271862016 :WRITE AVG:633.808054 MB/s
Thread 140235271862016 :READ AVG:2077.526668 MB/s
Thread 140235271862016 :PASS
TESTSTAT:NUM FILES:3200 
TESTSTAT:NUM DIRECTORYS:4 
TESTSTAT:WRITE SIZE:10006 MB
TESTSTAT:WRITE SIZE:10006 MB
TESTSTAT:READ SIZE:10006 MB
TESTSTAT:WRITE AVG:1231.677759 MB/s
TESTSTAT:READ AVG:4181.142465 MB/s
TESTTIME:10.96 s
TESTRESULT:PASS 

